<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ network.name }} - Topology - Docker Watcher</title>
    <link rel="icon" type="image/png" href="https://www.docker.com/wp-content/uploads/2022/03/Moby-logo.png">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/network_topology.css') }}">
    
    <!-- Vis.js Network -->
    <script type="text/javascript" src="https://unpkg.com/vis-network/standalone/umd/vis-network.min.js"></script>
</head>
<body>
    <div class="container">
        <div class="back-button" onclick="window.location.href='/networks-volumes'">
            ‚Üê Back to Networks & Volumes
        </div>

        <header>
            <div class="header-content">
                <img src="https://www.docker.com/wp-content/uploads/2022/03/Moby-logo.png" alt="Docker Logo" class="docker-logo">
                <div class="header-text">
                    <h1>üåê {{ network.name }}</h1>
                    <p class="subtitle">Network Topology Visualization</p>
                </div>
            </div>
        </header>

        <!-- Network Info Card -->
        <div class="network-info-card">
            <div class="info-grid">
                <div class="info-item">
                    <span class="info-label">üÜî ID:</span>
                    <span class="info-value">{{ network.id }}</span>
                </div>
                <div class="info-item">
                    <span class="info-label">üîß Driver:</span>
                    <span class="info-value">{{ network.driver }}</span>
                </div>
                <div class="info-item">
                    <span class="info-label">üåç Scope:</span>
                    <span class="info-value">{{ network.scope }}</span>
                </div>
                <div class="info-item">
                    <span class="info-label">üåç Subnet:</span>
                    <span class="info-value">{{ network.subnet }}</span>
                </div>
                <div class="info-item">
                    <span class="info-label">üö™ Gateway:</span>
                    <span class="info-value">{{ network.gateway }}</span>
                </div>
                <div class="info-item">
                    <span class="info-label">üîí Internal:</span>
                    <span class="info-value">{{ 'Yes' if network.internal else 'No' }}</span>
                </div>
            </div>
        </div>

        <!-- Topology Visualization -->
        <div class="topology-container">
            <div class="topology-header">
                <h2>üìä Network Topology</h2>
                <div class="topology-controls">
                    <button class="control-btn" onclick="fitNetwork()" title="Fit to screen">
                        üîç Fit
                    </button>
                    <button class="control-btn" onclick="resetZoom()" title="Reset zoom">
                        ‚Ü∫ Reset
                    </button>
                    <button class="control-btn" onclick="togglePhysics()" title="Toggle physics">
                        <span id="physics-icon">‚ö°</span> Physics
                    </button>
                </div>
            </div>
            
            <!-- Canvas for the graph -->
            <div id="network-graph"></div>
            
            <!-- Legend -->
            <div class="legend">
                <div class="legend-item">
                    <div class="legend-icon network-icon"></div>
                    <span>Network</span>
                </div>
                <div class="legend-item">
                    <div class="legend-icon container-running"></div>
                    <span>Running</span>
                </div>
                <div class="legend-item">
                    <div class="legend-icon container-stopped"></div>
                    <span>Stopped</span>
                </div>
                <div class="legend-item">
                    <div class="legend-icon container-other"></div>
                    <span>Other</span>
                </div>
            </div>
        </div>

        <!-- Info Panel (shows details when you click a node) -->
        <div id="info-panel" class="info-panel hidden">
            <div class="info-panel-header">
                <h3 id="info-title">Node Info</h3>
                <button class="close-btn" onclick="closeInfoPanel()">‚úï</button>
            </div>
            <div id="info-content" class="info-panel-content">
                <!-- Will be populated dynamically -->
            </div>
            <div class="info-panel-actions" id="info-actions">
                <!-- Will be populated dynamically -->
            </div>
        </div>
    </div>

    <script>
        const networkId = '{{ network.id }}';
    </script>
    <script src="{{ url_for('static', filename='js/network_topology.js') }}"></script>
</body>
</html>